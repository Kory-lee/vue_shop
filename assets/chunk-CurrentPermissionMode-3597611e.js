var d=(s,r,o)=>new Promise((m,c)=>{var a=t=>{try{i(o.next(t))}catch(e){c(e)}},u=t=>{try{i(o.throw(t))}catch(e){c(e)}},i=t=>t.done?m(t.value):Promise.resolve(t.value).then(a,u);i((o=o.apply(s,r)).next())});import{bv as R,a7 as B,aK as S,cf as f,aD as n,ai as F,e0 as y,aE as C,bb as p,a as D,B as T,b as L,i as w,aa as h,ab as O,ac as k,c as _,ad as A,aR as E,aQ as N,ae as K}from"./entry-index-204be9fe.js";import{D as $}from"./chunk-index-f0fec3ea.js";import{u as j}from"./chunk-useTabs-5841f744.js";import{i as b}from"./chunk-intersection-99741de9.js";function U(){const s=R(),r=B(),o=S(),{closeAll:m}=j(C);function c(){return d(this,null,function*(){r.setProjectConfig({permissionMode:f.permissionMode===n.BACK?n.ROUTE_MAPPING:n.BACK}),location.reload()})}function a(){return d(this,null,function*(){F().clearCacheTabs(),y(),(yield o.buildRoutesAction()).forEach(l=>{C.addRoute(l)}),o.setLastBuildMenuTime(),yield m()})}function u(e,g=!0){var M;if(!e)return g;const l=f.permissionMode;if([n.ROUTE_MAPPING,n.ROLE].includes(l))return p(e)?b(e,s.getRoleList).length>0:(M=s.getRoleList)==null?void 0:M.includes(e);if(n.BACK===l){const P=o.getPermCodeList;return p(e)?b(e,P).length>0:P.includes(e)}return!0}function i(e){return d(this,null,function*(){if(f.permissionMode!==n.ROUTE_MAPPING)throw new Error("please switch permissionModeEnum to ROLE mode in the configuration to operate");p(e)||(e=[e]),s.setRoleList(e),yield a()})}function t(){return d(this,null,function*(){a()})}return{togglePermissionMode:c,changeRole:i,hasPermission:u,resume:a,refreshMenu:t}}const v=D({name:"CurrentPermissionMode",components:{Divider:$,Button:T},setup(){const s=B(),r=L(()=>s.getProjectConfig.permissionMode===n.BACK),{togglePermissionMode:o}=U();return{togglePermissionMode:o,PermissionModeEnum:n,isBackPermissionMode:r}}}),x={class:"mt-2"},G=K("span",null,"\u5F53\u524D\u6743\u9650\u6A21\u5F0F: ",-1),I=E("\u5207\u6362\u6743\u9650\u6A21\u5F0F");function V(s,r,o,m,c,a){const u=h("Button"),i=h("Divider");return O(),k("div",x,[G,_(u,{class:"ml-4"},{default:A(()=>[E(N(s.isBackPermissionMode?"\u540E\u53F0\u6743\u9650\u6A21\u5F0F":"\u524D\u7AEF\u89D2\u8272\u6743\u9650\u6A21\u5F0F"),1)]),_:1}),_(u,{class:"ml-4",onClick:s.togglePermissionMode,type:"primary"},{default:A(()=>[I]),_:1},8,["onClick"]),_(i)])}var z=w(v,[["render",V]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{z as C,X as a,U as u};
