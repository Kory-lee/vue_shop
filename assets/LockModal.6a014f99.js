var m=(e,n,s)=>new Promise((t,a)=>{var c=o=>{try{l(s.next(o))}catch(i){a(i)}},r=o=>{try{l(s.throw(o))}catch(i){a(i)}},l=o=>o.done?t(o.value):Promise.resolve(o.value).then(c,r);l((s=s.apply(e,n)).next())});import{B as C,u as v}from"./index.87b654e0.js";import{C as y,d as B,at as S,ac as $,c as _,f as g,o as M,g as N,l as h,b as d,h as p,x as I,q as b,aE as w,m as P}from"./vendor.2611dcfe.js";import{aD as u,aE as k,S as L,_ as R,c as U,T as x}from"./index.387d2779.js";import"./index.07ba7b0a.js";import"./createAsyncComponent.dbfe6a1d.js";import"./errorLog.3e4b5054.js";import"./exceptionEnum.1496ab9e.js";import"./index.592c35b8.js";import"./useTabs.5d2f2b6e.js";/* empty css              */import"./useTimeout.b1b9039a.js";const E=y({id:"lock",state:()=>({lockInfo:u.getLocal(k)}),getters:{getLockInfo(e){return this.lockInfo}},actions:{setLockInfo(e){this.lockInfo=Object.assign({},this.lockInfo,e),u.setLocal(k,this.lockInfo)},resetLockInfo(){u.removeLocal(k),this.lockInfo=null},unLock(e=""){return m(this,null,function*(){var t;const n=L();return((t=this.lockInfo)==null?void 0:t.pwd)===e?(this.resetLockInfo(),!0):yield(()=>m(this,null,function*(){var a;try{const c=(a=n.getUserInfo)==null?void 0:a.username,r=yield n.login({username:c,password:e,goHome:!1,mode:"none"});return r&&this.resetLockInfo(),r}catch(c){return!1}}))()})}}});const O=B({name:"LockModal",components:{BasicModal:C,Button:S},setup(){const{t:e}=$(),{getPrefixCls:n}=U(),s=n("header-lock-modal"),t=L(),a=E(),c=_(()=>{var f;return(f=t.getUserInfo)==null?void 0:f.realName}),[r,{closeModal:l}]=v();function o(){return m(this,null,function*(){l(),a.setLockInfo({isLock:!0,pwd:"1321"})})}const i=_(()=>{var f;return((f=t.getUserInfo)==null?void 0:f.avatar)||x});return{t:e,prefixCls:s,getRealName:c,register:r,handleLock:o,avatar:i}}}),V=["src"];function D(e,n,s,t,a,c){const r=g("Button"),l=g("BasicModal");return M(),N(l,P(e.$attrs,{footer:null,title:e.t("layout.header.lockScreen"),class:e.prefixCls,onRegister:e.register}),{default:h(()=>[d("div",{class:p(`${e.prefixCls}__entry`)},[d("div",{class:p(`${e.prefixCls}__header`)},[d("img",{src:e.avatar,class:p(`${e.prefixCls}__header-img`),alt:""},null,10,V),d("p",{class:p(`${e.prefixCls}__header-name`)},I(e.getRealName),3)],2),d("div",{class:p(`${e.prefixCls}__footer`)},[b(r,{type:"primary",block:"",class:"mt-2",onClick:e.handleLock},{default:h(()=>[w(I(e.t("layout.header.lockScreenBtn")),1)]),_:1},8,["onClick"])],2)],2)]),_:1},16,["title","class","onRegister"])}var W=R(O,[["render",D],["__scopeId","data-v-ac43b734"]]);export{W as default};
