var S=(e,t,o)=>new Promise((a,r)=>{var c=n=>{try{s(o.next(n))}catch(d){r(d)}},u=n=>{try{s(o.throw(n))}catch(d){r(d)}},s=n=>n.done?a(n.value):Promise.resolve(n.value).then(c,u);s((o=o.apply(e,t)).next())});import{L as z,u as L,a as D}from"./LoginFormTitle.35cffd9e.js";import{r as m,u as f,ax as T,d as g,au as h,ad as y,J as j,f as i,o as _,g as $,l as p,aF as C,x as v,m as b,bh as w,q as l,bi as B,c as E,a as N,F as x,v as A}from"./vendor.19bf757c.js";/* empty css              *//* empty css               */import{_ as F,J as R,c as P}from"./index.9b7e9a93.js";function V(e){const t=m(e),o=m(!1);let a;function r(){a&&window.clearInterval(a)}function c(){o.value=!1,r(),a=null}function u(){f(o)||!!a||(o.value=!0,a=setInterval(()=>{f(t)===1?(c(),t.value=e):t.value-=1},1e3))}function s(){t.value=e,c()}function n(){s(),u()}return T(()=>s()),{start:u,reset:s,restart:n,clear:r,stop:c,currentCount:t,isStart:o}}const J=g({name:"CountButton",components:{Button:h},inheritAttrs:!1,props:{value:null,count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},setup(e){const t=m(!1),{t:o}=y(),{currentCount:a,isStart:r,start:c,reset:u}=V(e.count);j(()=>e.value===void 0&&u());function s(){return S(this,null,function*(){const{beforeStartFunc:n}=e;if(n&&R(n)){t.value=!0;try{(yield n())&&c()}finally{t.value=!1}}else c()})}return{t:o,loading:t,handleStart:s,currentCount:a,isStart:r}}});function q(e,t,o,a,r,c){const u=i("Button");return _(),$(u,b(e.$attrs,{disable:e.isStart,loading:e.loading,onClick:e.handleStart}),{default:p(()=>[C(v(e.isStart?e.t("component.countDown.sendText",[e.currentCount]):e.t("component.countDown.normalText")),1)]),_:1},16,["disable","loading","onClick"])}var G=F(J,[["render",q]]);const O=g({name:"CountDownInput",components:{CountButton:G,Input:w},props:{value:String,size:{type:String,default:"default"},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},setup(e){const{getPrefixCls:t}=P();return{prefixCls:t("countdown-input")}}});function U(e,t,o,a,r,c){const u=i("CountButton"),s=i("Input");return _(),$(s,b(e.$attrs,{class:e.prefixCls,size:e.size}),{addonAfter:p(()=>[l(u,{size:e.size,count:e.count,"before-start-func":e.sendCodeApi},null,8,["size","count","before-start-func"])]),_:1},16,["class","size"])}var H=F(O,[["render",U]]);const K=g({name:"RegisterForm",components:{CountDownInput:H,LoginFormTitle:z,Form:B,FormItem:B.Item,Button:h,Input:w},setup(){const e=m(!1),{t}=y(),{handleBackLogin:o,getLoginState:a}=L(),r=E(()=>f(a)===D.REGISTER);return{loading:e,getShow:r,handleBackLogin:o,t}}});function M(e,t,o,a,r,c){const u=i("LoginFormTitle"),s=i("Input"),n=i("FormItem"),d=i("CountDownInput"),I=i("Button"),k=i("Form");return e.getShow?(_(),N(x,{key:0},[l(u,{class:"enter-x"}),l(k,{class:"p-4 enter-x"},{default:p(()=>[l(n,{name:"account",class:"enter-x"},{default:p(()=>[l(s,{placeholder:e.t("sys.login.username"),size:"large"},null,8,["placeholder"])]),_:1}),l(n,{name:"mobile",class:"enter-x"},{default:p(()=>[l(s,{placeholder:e.t("sys.login.mobile"),size:"large"},null,8,["placeholder"])]),_:1}),l(n,{name:"sms",class:"enter-x"},{default:p(()=>[l(d,{size:"large",placeholder:e.t("sys.login.smsCode")},null,8,["placeholder"])]),_:1}),l(n,{class:"enter-x"},{default:p(()=>[l(I,{block:"",loading:e.loading,type:"primary",size:"large"},{default:p(()=>[C(v(e.t("common.resetText")),1)]),_:1},8,["loading"]),l(I,{block:"",size:"large",class:"mt-4",onClick:e.handleBackLogin},{default:p(()=>[C(v(e.t("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})],64)):A("",!0)}var te=F(K,[["render",M]]);export{te as default};
