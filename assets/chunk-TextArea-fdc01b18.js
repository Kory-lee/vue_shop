import{a as ae,p as y,R as de,c9 as E,c5 as ce,w as te,s as Z,q as ne,y as re,e as ie,f as V,_ as A,c as B,ad as fe,x as N,ch as ge,aW as le,u as me,b as W,aF as he,O as Y,c6 as J}from"./entry-index-59c4b1ac.js";import{t as oe,C as xe,a as be,r as K,f as ze}from"./chunk-index-5774cacf.js";import{a as Se}from"./chunk-antInputDirective-fe4d28a4.js";import{u as pe}from"./chunk-FormItemContext-c850091b.js";var ye=`
 min-height:0 !important;
 max-height:none !important;
 height:0 !important;
 visibility:hidden !important;
 overflow:hidden !important;
 position:absolute !important;
 z-index:-1000 !important;
 top:0 !important;
 right:0 !important
`,Ae=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],L={},b;function Ce(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=d.getAttribute("id")||d.getAttribute("data-reactid")||d.getAttribute("name");if(e&&L[i])return L[i];var t=window.getComputedStyle(d),g=t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),c=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),h=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),v=Ae.map(function(u){return"".concat(u,":").concat(t.getPropertyValue(u))}).join(";"),l={sizingStyle:v,paddingSize:c,borderSize:h,boxSizing:g};return e&&i&&(L[i]=l),l}function we(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;b||(b=document.createElement("textarea"),b.setAttribute("tab-index","-1"),b.setAttribute("aria-hidden","true"),document.body.appendChild(b)),d.getAttribute("wrap")?b.setAttribute("wrap",d.getAttribute("wrap")):b.removeAttribute("wrap");var g=Ce(d,e),c=g.paddingSize,h=g.borderSize,v=g.boxSizing,l=g.sizingStyle;b.setAttribute("style","".concat(l,";").concat(ye)),b.value=d.value||d.placeholder||"";var u=Number.MIN_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,s=b.scrollHeight,z;if(v==="border-box"?s+=h:v==="content-box"&&(s-=c),i!==null||t!==null){b.value=" ";var T=b.scrollHeight-c;i!==null&&(u=T*i,v==="border-box"&&(u=u+c+h),s=Math.max(u,s)),t!==null&&(f=T*t,v==="border-box"&&(f=f+c+h),z=s>f?"":"hidden",s=Math.min(f,s))}return{height:"".concat(s,"px"),minHeight:"".concat(u,"px"),maxHeight:"".concat(f,"px"),overflowY:z,resize:"none"}}var X=0,Q=1,Te=2,_e=ae({name:"ResizableTextArea",inheritAttrs:!1,props:oe(),setup:function(e,i){var t=i.attrs,g=i.emit,c=i.expose,h,v,l=y(),u=y({}),f=y(X);de(function(){E.cancel(h),E.cancel(v)});var s=function(){try{if(document.activeElement===l.value){var m=l.value.selectionStart,p=l.value.selectionEnd;l.value.setSelectionRange(m,p)}}catch(R){}},z=function(){var m=e.autoSize||e.autosize;if(!(!m||!l.value)){var p=m.minRows,R=m.maxRows;u.value=we(l.value,!1,p,R),f.value=Q,E.cancel(v),v=E(function(){f.value=Te,v=E(function(){f.value=X,s()})})}},T=function(){E.cancel(h),h=E(z)},C=function(m){if(f.value===X){g("resize",m);var p=e.autoSize||e.autosize;p&&T()}};ce(e.autosize===void 0,"Input.TextArea","autosize is deprecated, please use autoSize instead.");var I=function(){var m=e.prefixCls,p=e.autoSize,R=e.autosize,k=e.disabled,D=re(e,["prefixCls","onPressEnter","autoSize","autosize","defaultValue","allowClear","type","lazy","maxlength","valueModifiers"]),G=ie(m,t.class,V({},"".concat(m,"-disabled"),k)),P=[t.style,u.value,f.value===Q?{overflowX:"hidden",overflowY:"hidden"}:null],j=A(A(A({},D),t),{style:P,class:G});return j.autofocus||delete j.autofocus,B(ge,{onResize:C,disabled:!(p||R)},{default:function(){return[fe(B("textarea",N(N({},j),{},{ref:l}),null),[[Se]])]}})};te(function(){return e.value},function(){Z(function(){z()})}),ne(function(){Z(function(){z()})});var _=le();return c({resizeTextarea:z,textArea:l,instance:_}),function(){return I()}}}),Ee=_e;function ue(d,e){return Y(d||"").slice(0,e).join("")}function ee(d,e,i,t){var g=i;return d?g=ue(i,t):Y(e||"").length<i.length&&Y(i||"").length>t&&(g=e),g}var Ne=ae({name:"ATextarea",inheritAttrs:!1,props:oe(),setup:function(e,i){var t=i.attrs,g=i.expose,c=i.emit,h=pe(),v=y(e.value===void 0?e.defaultValue:e.value),l=y(),u=y(""),f=me("input",e),s=f.prefixCls,z=f.size,T=f.direction,C=W(function(){return e.showCount===""||e.showCount||!1}),I=W(function(){return Number(e.maxlength)>0}),_=y(!1),w=y(),m=y(0),p=function(a){_.value=!0,w.value=u.value,m.value=a.currentTarget.selectionStart,c("compositionstart",a)},R=function(a){var n;_.value=!1;var r=a.currentTarget.value;if(I.value){var x=m.value>=e.maxlength+1||m.value===((n=w.value)===null||n===void 0?void 0:n.length);r=ee(x,w.value,r,e.maxlength)}r!==u.value&&(P(r),K(a.currentTarget,a,U,r)),c("compositionend",a)},k=le();te(function(){return e.value},function(){var o;"value"in k.vnode.props,v.value=(o=e.value)!==null&&o!==void 0?o:""});var D=function(a){var n;be((n=l.value)===null||n===void 0?void 0:n.textArea,a)},G=function(){var a,n;(n=(a=l.value)===null||a===void 0?void 0:a.textArea)===null||n===void 0||n.blur()},P=function(a,n){v.value!==a&&(e.value===void 0?v.value=a:Z(function(){var r,x,S;l.value.textArea.value!==u.value&&((S=(r=l.value)===null||r===void 0?void 0:(x=r.instance).update)===null||S===void 0||S.call(x))}),Z(function(){n&&n()}))},j=function(a){a.keyCode===13&&c("pressEnter",a),c("keydown",a)},$=function(a){var n=e.onBlur;n==null||n(a),h.onFieldBlur()},U=function(a){c("update:value",a.target.value),c("change",a),c("input",a),h.onFieldChange()},se=function(a){K(l.value.textArea,a,U),P("",function(){D()})},q=function(a){var n=a.target.composing,r=a.target.value;if(_.value=!!(a.isComposing||n),!(_.value&&e.lazy||v.value===r)){if(I.value){var x=a.target,S=x.selectionStart>=e.maxlength+1||x.selectionStart===r.length||!x.selectionStart;r=ee(S,u.value,r,e.maxlength)}K(a.currentTarget,a,U,r),P(r)}},ve=function(){var a,n,r,x=t.style,S=t.class,H=e.bordered,M=H===void 0?!0:H,F=A(A(A({},re(e,["allowClear"])),t),{style:C.value?{}:x,class:(a={},V(a,"".concat(s.value,"-borderless"),!M),V(a,"".concat(S),S&&!C.value),V(a,"".concat(s.value,"-sm"),z.value==="small"),V(a,"".concat(s.value,"-lg"),z.value==="large"),a),showCount:null,prefixCls:s.value,onInput:q,onChange:q,onBlur:$,onKeydown:j,onCompositionstart:p,onCompositionend:R});return!((n=e.valueModifiers)===null||n===void 0)&&n.lazy&&delete F.onInput,B(Ee,N(N({},F),{},{id:(r=F.id)!==null&&r!==void 0?r:h.id.value,ref:l,maxlength:e.maxlength}),null)};return ne(function(){}),g({focus:D,blur:G,resizableTextArea:l}),he(function(){var o=ze(v.value);!_.value&&I.value&&(e.value===null||e.value===void 0)&&(o=ue(o,e.maxlength)),u.value=o}),function(){var o=e.maxlength,a=e.bordered,n=a===void 0?!0:a,r=e.hidden,x=t.style,S=t.class,H=A(A(A({},e),t),{prefixCls:s.value,inputType:"text",handleReset:se,direction:T.value,bordered:n,style:C.value?void 0:x}),M=B(xe,N(N({},H),{},{value:u.value}),{element:ve});if(C.value){var F=Y(u.value).length,O="";J(C.value)==="object"?O=C.value.formatter({count:F,maxlength:o}):O="".concat(F).concat(I.value?" / ".concat(o):""),M=B("div",{hidden:r,class:ie("".concat(s.value,"-textarea"),V({},"".concat(s.value,"-textarea-rtl"),T.value==="rtl"),"".concat(s.value,"-textarea-show-count"),S),style:x,"data-count":J(O)!=="object"?O:void 0},[M])}return M}}});export{Ne as T};
