import{P as s,t as B,b as F,w as k,u as L,f as U,x as w,R as N,aa as Y,H as M,k as l,c,_ as j,cQ as Z,G as P,J as ee,I as ae,D as te}from"./index.a7e7c866.js";import{u as re}from"./useBreakpoint.57aa49e8.js";import{r as ne}from"./responsiveObserve.e9679a6a.js";import{u as se,a as oe}from"./useSize.eaf7ad29.js";import{P as le}from"./index.d4bb533a.js";var V={prefixCls:s.string,shape:s.oneOf(B("circle","square")).def("circle"),size:{type:[Number,String,Object],default:function(){return"default"}},src:s.string,srcset:s.string,icon:s.VNodeChild,alt:s.string,gap:s.number,draggable:s.bool,loadError:{type:Function}},ie=F({name:"AAvatar",inheritAttrs:!1,props:V,slots:["icon"],setup:function(e,S){var b=S.slots,n=S.attrs,f=k(!0),h=k(!1),x=k(1),o=k(null),y=k(null),R=L("avatar",e),d=R.prefixCls,W=se(),I=re(),m=U(function(){if(ee(e.size)==="object"){var t=ne.find(function(r){return I.value[r]}),a=e.size[t];return a}}),z=function(a){return m.value?{width:"".concat(m.value,"px"),height:"".concat(m.value,"px"),lineHeight:"".concat(m.value,"px"),fontSize:"".concat(a?m.value/2:18,"px")}:{}},p=function(){if(!(!o.value||!y.value)){var a=o.value.offsetWidth,r=y.value.offsetWidth;if(a!==0&&r!==0){var C=e.gap,g=C===void 0?4:C;g*2<r&&(x.value=r-g*2<a?(r-g*2)/a:1)}}},O=function(){var a=e.loadError,r=a==null?void 0:a();r!==!1&&(f.value=!1)};return w(function(){return e.src},function(){N(function(){f.value=!0,x.value=1})}),w(function(){return e.gap},function(){N(function(){p()})}),Y(function(){N(function(){p(),h.value=!0})}),function(){var t,a,r=e.shape,C=e.size,g=e.src,$=e.alt,q=e.srcset,D=e.draggable,_=M(b,e,"icon"),u=d.value,i=C==="default"?W.value:C,J=(t={},l(t,"".concat(n.class),!!n.class),l(t,u,!0),l(t,"".concat(u,"-lg"),i==="large"),l(t,"".concat(u,"-sm"),i==="small"),l(t,"".concat(u,"-").concat(r),r),l(t,"".concat(u,"-image"),g&&f.value),l(t,"".concat(u,"-icon"),_),t),Q=typeof i=="number"?{width:"".concat(i,"px"),height:"".concat(i,"px"),lineHeight:"".concat(i,"px"),fontSize:_?"".concat(i/2,"px"):"18px"}:{},H=(a=b.default)===null||a===void 0?void 0:a.call(b),A;if(g&&f.value)A=c("img",{draggable:D,src:g,srcset:q,onError:O,alt:$},null);else if(_)A=_;else if(h.value||x.value!==1){var G="scale(".concat(x.value,") translateX(-50%)"),X={msTransform:G,WebkitTransform:G,transform:G},K=typeof i=="number"?{lineHeight:"".concat(i,"px")}:{};A=c(Z,{onResize:p},{default:function(){return[c("span",{class:"".concat(u,"-string"),ref:o,style:j(j({},K),X)},[H])]}})}else A=c("span",{class:"".concat(u,"-string"),ref:o,style:{opacity:0}},[H]);return c("span",P(P({},n),{},{ref:y,class:J,style:j(j(j({},Q),z(!!_)),n.style)}),[A])}}}),E=ie,ce={prefixCls:s.string,maxCount:s.number,maxStyle:{type:Object,default:function(){return{}}},maxPopoverPlacement:s.oneOf(B("top","bottom")).def("top"),size:V.size},ue=F({name:"AAvatarGroup",inheritAttrs:!1,props:ce,setup:function(e,S){var b=S.slots,n=S.attrs,f=L("avatar-group",e),h=f.prefixCls,x=f.direction;return oe(e),function(){var o,y=e.maxPopoverPlacement,R=y===void 0?"top":y,d=e.maxCount,W=e.maxStyle,I=(o={},l(o,h.value,!0),l(o,"".concat(h.value,"-rtl"),x.value==="rtl"),l(o,"".concat(n.class),!!n.class),o),m=M(b,e),z=ae(m).map(function(a,r){return te(a,{key:"avatar-key-".concat(r)})}),p=z.length;if(d&&d<p){var O=z.slice(0,d),t=z.slice(d,p);return O.push(c(le,{key:"avatar-popover-key",content:t,trigger:"hover",placement:R,overlayClassName:"".concat(h.value,"-popover")},{default:function(){return[c(E,{style:W},{default:function(){return["+".concat(p-d)]}})]}})),c("div",P(P({},n),{},{class:I,style:n.style}),[O])}return c("div",P(P({},n),{},{class:I,style:n.style}),[z])}}}),T=ue;E.Group=T;E.install=function(v){return v.component(E.name,E),v.component(T.name,T),v};export{E as A};
