import{a as V,P as X,p as f,u as D,b as G,w as E,s as C,q as J,M as K,f as s,c as d,_ as g,ch as Q,x as j,c6 as U}from"./entry-index-0478a864.js";import{u as Y,e as Z}from"./chunk-eagerComputed-138e6af0.js";import{r as $}from"./chunk-responsiveObserve-3a4508d1.js";import{u as ee}from"./chunk-useSize-34976d09.js";var ae=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:X.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},re=V({name:"AAvatar",inheritAttrs:!1,props:ae(),slots:["icon"],setup:function(e,P){var x=P.slots,m=P.attrs,h=f(!0),_=f(!1),p=f(1),S=f(null),y=f(null),O=D("avatar",e),R=O.prefixCls,T=ee(),n=G(function(){return e.size==="default"?T.value:e.size}),W=Y(),c=Z(function(){if(U(e.size)==="object"){var r=$.find(function(t){return W.value[t]}),a=e.size[r];return a}}),k=function(a){return c.value?{width:"".concat(c.value,"px"),height:"".concat(c.value,"px"),lineHeight:"".concat(c.value,"px"),fontSize:"".concat(a?c.value/2:18,"px")}:{}},z=function(){if(!(!S.value||!y.value)){var a=S.value.offsetWidth,t=y.value.offsetWidth;if(a!==0&&t!==0){var l=e.gap,u=l===void 0?4:l;u*2<t&&(p.value=t-u*2<a?(t-u*2)/a:1)}}},w=function(){var a=e.loadError,t=a==null?void 0:a();t!==!1&&(h.value=!1)};return E(function(){return e.src},function(){C(function(){h.value=!0,p.value=1})}),E(function(){return e.gap},function(){C(function(){z()})}),J(function(){C(function(){z(),_.value=!0})}),function(){var r,a,t=e.shape,l=e.src,u=e.alt,N=e.srcset,B=e.draggable,H=e.crossOrigin,o=K(x,e,"icon"),i=R.value,M=(r={},s(r,"".concat(m.class),!!m.class),s(r,i,!0),s(r,"".concat(i,"-lg"),n.value==="large"),s(r,"".concat(i,"-sm"),n.value==="small"),s(r,"".concat(i,"-").concat(t),t),s(r,"".concat(i,"-image"),l&&h.value),s(r,"".concat(i,"-icon"),o),r),F=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:o?"".concat(n.value/2,"px"):"18px"}:{},A=(a=x.default)===null||a===void 0?void 0:a.call(x),v;if(l&&h.value)v=d("img",{draggable:B,src:l,srcset:N,onError:w,alt:u,crossorigin:H},null);else if(o)v=o;else if(_.value||p.value!==1){var b="scale(".concat(p.value,") translateX(-50%)"),L={msTransform:b,WebkitTransform:b,transform:b},q=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};v=d(Q,{onResize:z},{default:function(){return[d("span",{class:"".concat(i,"-string"),ref:S,style:g(g({},q),L)},[A])]}})}else v=d("span",{class:"".concat(i,"-string"),ref:S,style:{opacity:0}},[A]);return d("span",j(j({},m),{},{ref:y,class:M,style:g(g(g({},F),k(!!o)),m.style)}),[v])}}}),ce=re;export{ce as A};
