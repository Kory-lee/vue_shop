import{a as H,P as i,t as $,p as O,u as q,b as Q,w as F,K as R,J as U,z as B,f as s,c,_ as j,cq as Y,y as P,F as Z,D as ee,v as ae}from"./index.618dfac3.js";import{u as re,e as te}from"./eagerComputed.2a896764.js";import{r as ne}from"./responsiveObserve.9d31ff62.js";import{u as oe,a as ie}from"./useSize.70cd43c0.js";import{P as le}from"./index.9af925d1.js";var se=function(){return{prefixCls:i.string,shape:i.oneOf($("circle","square")).def("circle"),size:{type:[Number,String,Object],default:function(){return"default"}},src:i.string,srcset:i.string,icon:i.any,alt:i.string,gap:i.number,draggable:i.bool,crossOrigin:String,loadError:{type:Function}}},ue=H({name:"AAvatar",inheritAttrs:!1,props:se(),slots:["icon"],setup:function(e,S){var b=S.slots,o=S.attrs,g=O(!0),x=O(!1),y=O(1),l=O(null),h=O(null),k=q("avatar",e),p=k.prefixCls,E=oe(),n=Q(function(){return e.size==="default"?E.value:e.size}),I=re(),v=te(function(){if(Z(e.size)==="object"){var a=ne.find(function(t){return I.value[t]}),r=e.size[a];return r}}),W=function(r){return v.value?{width:"".concat(v.value,"px"),height:"".concat(v.value,"px"),lineHeight:"".concat(v.value,"px"),fontSize:"".concat(r?v.value/2:18,"px")}:{}},f=function(){if(!(!l.value||!h.value)){var r=l.value.offsetWidth,t=h.value.offsetWidth;if(r!==0&&t!==0){var u=e.gap,C=u===void 0?4:u;C*2<t&&(y.value=t-C*2<r?(t-C*2)/r:1)}}},z=function(){var r=e.loadError,t=r==null?void 0:r();t!==!1&&(g.value=!1)};return F(function(){return e.src},function(){R(function(){g.value=!0,y.value=1})}),F(function(){return e.gap},function(){R(function(){f()})}),U(function(){R(function(){f(),x.value=!0})}),function(){var a,r,t=e.shape,u=e.src,C=e.alt,L=e.srcset,M=e.draggable,D=e.crossOrigin,_=B(b,e,"icon"),d=p.value,J=(a={},s(a,"".concat(o.class),!!o.class),s(a,d,!0),s(a,"".concat(d,"-lg"),n.value==="large"),s(a,"".concat(d,"-sm"),n.value==="small"),s(a,"".concat(d,"-").concat(t),t),s(a,"".concat(d,"-image"),u&&g.value),s(a,"".concat(d,"-icon"),_),a),K=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:_?"".concat(n.value/2,"px"):"18px"}:{},w=(r=b.default)===null||r===void 0?void 0:r.call(b),A;if(u&&g.value)A=c("img",{draggable:M,src:u,srcset:L,onError:z,alt:C,crossorigin:D},null);else if(_)A=_;else if(x.value||y.value!==1){var N="scale(".concat(y.value,") translateX(-50%)"),V={msTransform:N,WebkitTransform:N,transform:N},X=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};A=c(Y,{onResize:f},{default:function(){return[c("span",{class:"".concat(d,"-string"),ref:l,style:j(j({},X),V)},[w])]}})}else A=c("span",{class:"".concat(d,"-string"),ref:l,style:{opacity:0}},[w]);return c("span",P(P({},o),{},{ref:h,class:J,style:j(j(j({},K),W(!!_)),o.style)}),[A])}}}),T=ue,ce=function(){return{prefixCls:i.string,maxCount:i.number,maxStyle:{type:Object,default:function(){return{}}},maxPopoverPlacement:i.oneOf($("top","bottom")).def("top"),maxPopoverTrigger:String,size:{type:[Number,String,Object],default:function(){return"default"}}}},ve=H({name:"AAvatarGroup",inheritAttrs:!1,props:ce(),setup:function(e,S){var b=S.slots,o=S.attrs,g=q("avatar-group",e),x=g.prefixCls,y=g.direction;return ie(e),function(){var l,h=e.maxPopoverPlacement,k=h===void 0?"top":h,p=e.maxCount,E=e.maxStyle,n=e.maxPopoverTrigger,I=n===void 0?"hover":n,v=(l={},s(l,x.value,!0),s(l,"".concat(x.value,"-rtl"),y.value==="rtl"),s(l,"".concat(o.class),!!o.class),l),W=B(b,e),f=ee(W).map(function(t,u){return ae(t,{key:"avatar-key-".concat(u)})}),z=f.length;if(p&&p<z){var a=f.slice(0,p),r=f.slice(p,z);return a.push(c(le,{key:"avatar-popover-key",content:r,trigger:I,placement:k,overlayClassName:"".concat(x.value,"-popover")},{default:function(){return[c(T,{style:E},{default:function(){return["+".concat(z-p)]}})]}})),c("div",P(P({},o),{},{class:v,style:o.style}),[a])}return c("div",P(P({},o),{},{class:v,style:o.style}),[f])}}}),G=ve;T.Group=G;T.install=function(m){return m.component(T.name,T),m.component(G.name,G),m};export{T as A};
