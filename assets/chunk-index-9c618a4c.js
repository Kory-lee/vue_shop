import{a as X,P as i,t as D,p as d,u as G,b as J,w as j,s as P,q as K,M as Q,f as c,c as g,_ as m,ch as U,y as I,c6 as Y}from"./entry-index-a3b6a048.js";import{u as Z,e as $}from"./chunk-eagerComputed-a5009bfd.js";import{r as ee}from"./chunk-responsiveObserve-831b722b.js";import{u as ae}from"./chunk-useSize-02187ba2.js";var re=function(){return{prefixCls:i.string,shape:i.oneOf(D("circle","square")).def("circle"),size:{type:[Number,String,Object],default:function(){return"default"}},src:i.string,srcset:i.string,icon:i.any,alt:i.string,gap:i.number,draggable:i.bool,crossOrigin:String,loadError:{type:Function}}},te=X({name:"AAvatar",inheritAttrs:!1,props:re(),slots:["icon"],setup:function(e,_){var z=_.slots,h=_.attrs,p=d(!0),A=d(!1),x=d(1),y=d(null),S=d(null),R=G("avatar",e),T=R.prefixCls,W=ae(),n=J(function(){return e.size==="default"?W.value:e.size}),k=Z(),o=$(function(){if(Y(e.size)==="object"){var r=ee.find(function(t){return k.value[t]}),a=e.size[r];return a}}),w=function(a){return o.value?{width:"".concat(o.value,"px"),height:"".concat(o.value,"px"),lineHeight:"".concat(o.value,"px"),fontSize:"".concat(a?o.value/2:18,"px")}:{}},b=function(){if(!(!y.value||!S.value)){var a=y.value.offsetWidth,t=S.value.offsetWidth;if(a!==0&&t!==0){var l=e.gap,u=l===void 0?4:l;u*2<t&&(x.value=t-u*2<a?(t-u*2)/a:1)}}},H=function(){var a=e.loadError,t=a==null?void 0:a();t!==!1&&(p.value=!1)};return j(function(){return e.src},function(){P(function(){p.value=!0,x.value=1})}),j(function(){return e.gap},function(){P(function(){b()})}),K(function(){P(function(){b(),A.value=!0})}),function(){var r,a,t=e.shape,l=e.src,u=e.alt,M=e.srcset,N=e.draggable,q=e.crossOrigin,v=Q(z,e,"icon"),s=T.value,B=(r={},c(r,"".concat(h.class),!!h.class),c(r,s,!0),c(r,"".concat(s,"-lg"),n.value==="large"),c(r,"".concat(s,"-sm"),n.value==="small"),c(r,"".concat(s,"-").concat(t),t),c(r,"".concat(s,"-image"),l&&p.value),c(r,"".concat(s,"-icon"),v),r),F=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:v?"".concat(n.value/2,"px"):"18px"}:{},E=(a=z.default)===null||a===void 0?void 0:a.call(z),f;if(l&&p.value)f=g("img",{draggable:N,src:l,srcset:M,onError:H,alt:u,crossorigin:q},null);else if(v)f=v;else if(A.value||x.value!==1){var C="scale(".concat(x.value,") translateX(-50%)"),L={msTransform:C,WebkitTransform:C,transform:C},V=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};f=g(U,{onResize:b},{default:function(){return[g("span",{class:"".concat(s,"-string"),ref:y,style:m(m({},V),L)},[E])]}})}else f=g("span",{class:"".concat(s,"-string"),ref:y,style:{opacity:0}},[E]);return g("span",I(I({},h),{},{ref:S,class:B,style:m(m(m({},F),w(!!v)),h.style)}),[f])}}}),oe=te;export{oe as A};
