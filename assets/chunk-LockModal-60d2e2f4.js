var d=(e,n,t)=>new Promise((s,a)=>{var c=o=>{try{i(t.next(o))}catch(l){a(l)}},r=o=>{try{i(t.throw(o))}catch(l){a(l)}},i=o=>o.done?s(o.value):Promise.resolve(o.value).then(c,r);i((t=t.apply(e,n)).next())});import{e9 as C,ej as u,ek as k,bo as L,i as v,a as y,B,j as $,a0 as S,b as _,a1 as g,a2 as M,af as N,a4 as h,a5 as m,a6 as f,aJ as I,c as b,aK as w,a$ as P,bp as R}from"./entry-index-0d006381.js";import{B as U,u as j}from"./chunk-index-13ec87de.js";import"./chunk-index-96961fbf.js";import"./chunk-DownOutlined-acfb04bf.js";import"./chunk-_baseIteratee-e7db6712.js";import"./chunk-get-2eefc673.js";import"./chunk-_flatRest-324778a6.js";import"./chunk-_setToString-73ec1dbd.js";import"./chunk-hasIn-33abd080.js";import"./chunk-createAsyncComponent-8f5bdbbe.js";import"./chunk-index-4e4009eb.js";import"./chunk-omit-db35e113.js";import"./chunk-useDesign-16b3bb5b.js";import"./chunk-LeftOutlined-bf5a479c.js";import"./chunk-useTabs-734a2ff7.js";import"./chunk-index-82731a25.js";import"./chunk-useRefs-093a4527.js";import"./chunk-useTimeout-e1c40a18.js";import"./chunk-index-02863093.js";const K=C({id:"lock",state:()=>({lockInfo:u.getLocal(k)}),getters:{getLockInfo(e){return this.lockInfo}},actions:{setLockInfo(e){this.lockInfo=Object.assign({},this.lockInfo,e),u.setLocal(k,this.lockInfo)},resetLockInfo(){u.removeLocal(k),this.lockInfo=null},unLock(e=""){return d(this,null,function*(){var s;const n=L();return((s=this.lockInfo)==null?void 0:s.pwd)===e?(this.resetLockInfo(),!0):yield(()=>d(this,null,function*(){var a;try{const c=(a=n.getUserInfo)==null?void 0:a.username,r=yield n.login({username:c,password:e,goHome:!1,mode:"none"});return r&&this.resetLockInfo(),r}catch(c){return!1}}))()})}}});const O=y({name:"LockModal",components:{BasicModal:U,Button:B},setup(){const{t:e}=$(),{getPrefixCls:n}=S(),t=n("header-lock-modal"),s=L(),a=K(),c=_(()=>{var p;return(p=s.getUserInfo)==null?void 0:p.realName}),[r,{closeModal:i}]=j();function o(){return d(this,null,function*(){i(),a.setLockInfo({isLock:!0,pwd:"1321"})})}const l=_(()=>{var p;return((p=s.getUserInfo)==null?void 0:p.avatar)||R});return{t:e,prefixCls:t,getRealName:c,register:r,handleLock:o,avatar:l}}}),V=["src"];function x(e,n,t,s,a,c){const r=g("Button"),i=g("BasicModal");return M(),N(i,P(e.$attrs,{footer:null,title:e.t("layout.header.lockScreen"),class:e.prefixCls,onRegister:e.register}),{default:h(()=>[m("div",{class:f(`${e.prefixCls}__entry`)},[m("div",{class:f(`${e.prefixCls}__header`)},[m("img",{src:e.avatar,class:f(`${e.prefixCls}__header-img`),alt:""},null,10,V),m("p",{class:f(`${e.prefixCls}__header-name`)},I(e.getRealName),3)],2),m("div",{class:f(`${e.prefixCls}__footer`)},[b(r,{type:"primary",block:"",class:"mt-2",onClick:e.handleLock},{default:h(()=>[w(I(e.t("layout.header.lockScreenBtn")),1)]),_:1},8,["onClick"])],2)],2)]),_:1},16,["title","class","onRegister"])}var re=v(O,[["render",x],["__scopeId","data-v-f2e2dcfc"]]);export{re as default};
