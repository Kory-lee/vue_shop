var d=(s,i,o)=>new Promise((m,c)=>{var a=t=>{try{r(o.next(t))}catch(e){c(e)}},u=t=>{try{r(o.throw(t))}catch(e){c(e)}},r=t=>t.done?m(t.value):Promise.resolve(t.value).then(a,u);r((o=o.apply(s,i)).next())});import{bI as C,d as E,bj as F,au as R,c as T,f as b,o as y,a as j,q as f,l as h,aF as A,x as w,b as L}from"./vendor.19bf757c.js";/* empty css               */import{S as D,b as S,w as N,at as p,o as n,d as k,az as x,r as B,N as _,_ as O}from"./index.9b7e9a93.js";import{u as $}from"./useTabs.e76d45bd.js";function I(){const s=D(),i=S(),o=N(),{closeAll:m}=$(B);function c(){return d(this,null,function*(){i.setProjectConfig({permissionMode:p.permissionMode===n.BACK?n.ROUTE_MAPPING:n.BACK}),location.reload()})}function a(){return d(this,null,function*(){k().clearCacheTabs(),x(),(yield o.buildRoutesAction()).forEach(l=>{B.addRoute(l)}),o.setLastBuildMenuTime(),yield m()})}function u(e,g=!0){var M;if(!e)return g;const l=p.permissionMode;if([n.ROUTE_MAPPING,n.ROLE].includes(l))return _(e)?C(e,s.getRoleList).length>0:(M=s.getRoleList)==null?void 0:M.includes(e);if(n.BACK===l){const P=o.getPermCodeList;return _(e)?C(e,P).length>0:P.includes(e)}return!0}function r(e){return d(this,null,function*(){if(p.permissionMode!==n.ROUTE_MAPPING)throw new Error("please switch permissionModeEnum to ROLE mode in the configuration to operate");_(e)||(e=[e]),s.setRoleList(e),yield a()})}function t(){return d(this,null,function*(){a()})}return{togglePermissionMode:c,changeRole:r,hasPermission:u,resume:a,refreshMenu:t}}const K=E({name:"CurrentPermissionMode",components:{Divider:F,Button:R},setup(){const s=S(),i=T(()=>s.getProjectConfig.permissionMode===n.BACK),{togglePermissionMode:o}=I();return{togglePermissionMode:o,PermissionModeEnum:n,isBackPermissionMode:i}}}),U={class:"mt-2"},G=L("span",null,"\u5F53\u524D\u6743\u9650\u6A21\u5F0F: ",-1),V=A("\u5207\u6362\u6743\u9650\u6A21\u5F0F");function v(s,i,o,m,c,a){const u=b("Button"),r=b("Divider");return y(),j("div",U,[G,f(u,{class:"ml-4"},{default:h(()=>[A(w(s.isBackPermissionMode?"\u540E\u53F0\u6743\u9650\u6A21\u5F0F":"\u524D\u7AEF\u89D2\u8272\u6743\u9650\u6A21\u5F0F"),1)]),_:1}),f(u,{class:"ml-4",onClick:s.togglePermissionMode,type:"primary"},{default:h(()=>[V]),_:1},8,["onClick"]),f(r)])}var z=O(K,[["render",v]]),X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:z});export{z as C,X as a,I as u};
