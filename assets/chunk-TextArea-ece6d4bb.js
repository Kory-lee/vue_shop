import{a as ae,c_ as de,p as A,R as ce,c9 as E,c5 as fe,w as te,s as Z,q as ne,y as re,e as ie,f as V,_ as z,c as M,ad as ge,x as N,ch as me,aW as le,u as he,b as W,aF as xe,O as Y,c6 as J}from"./entry-index-67938f7f.js";import{t as oe,C as be,a as ze,r as K,f as Se}from"./chunk-index-4b6312e4.js";import{a as pe}from"./chunk-antInputDirective-fe4d28a4.js";import{u as ye}from"./chunk-FormItemContext-2e0e220f.js";var Ae=`
 min-height:0 !important;
 max-height:none !important;
 height:0 !important;
 visibility:hidden !important;
 overflow:hidden !important;
 position:absolute !important;
 z-index:-1000 !important;
 top:0 !important;
 right:0 !important
`,Ce=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],L={},b;function we(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=d.getAttribute("id")||d.getAttribute("data-reactid")||d.getAttribute("name");if(e&&L[i])return L[i];var t=window.getComputedStyle(d),g=t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),c=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),h=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),v=Ce.map(function(u){return"".concat(u,":").concat(t.getPropertyValue(u))}).join(";"),l={sizingStyle:v,paddingSize:c,borderSize:h,boxSizing:g};return e&&i&&(L[i]=l),l}function Te(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;b||(b=document.createElement("textarea"),b.setAttribute("tab-index","-1"),b.setAttribute("aria-hidden","true"),document.body.appendChild(b)),d.getAttribute("wrap")?b.setAttribute("wrap",d.getAttribute("wrap")):b.removeAttribute("wrap");var g=we(d,e),c=g.paddingSize,h=g.borderSize,v=g.boxSizing,l=g.sizingStyle;b.setAttribute("style","".concat(l,";").concat(Ae)),b.value=d.value||d.placeholder||"";var u=Number.MIN_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,s=b.scrollHeight,S;if(v==="border-box"?s+=h:v==="content-box"&&(s-=c),i!==null||t!==null){b.value=" ";var T=b.scrollHeight-c;i!==null&&(u=T*i,v==="border-box"&&(u=u+c+h),s=Math.max(u,s)),t!==null&&(f=T*t,v==="border-box"&&(f=f+c+h),S=s>f?"":"hidden",s=Math.min(f,s))}return{height:"".concat(s,"px"),minHeight:"".concat(u,"px"),maxHeight:"".concat(f,"px"),overflowY:S,resize:"none"}}var X=0,Q=1,_e=2,Ee=ae({name:"ResizableTextArea",mixins:[de],inheritAttrs:!1,props:oe(),setup:function(e,i){var t=i.attrs,g=i.emit,c=i.expose,h,v,l=A(),u=A({}),f=A(X);ce(function(){E.cancel(h),E.cancel(v)});var s=function(){try{if(document.activeElement===l.value){var m=l.value.selectionStart,y=l.value.selectionEnd;l.value.setSelectionRange(m,y)}}catch(R){}},S=function(){var m=e.autoSize||e.autosize;if(!(!m||!l.value)){var y=m.minRows,R=m.maxRows;u.value=Te(l.value,!1,y,R),f.value=Q,E.cancel(v),v=E(function(){f.value=_e,v=E(function(){f.value=X,s()})})}},T=function(){E.cancel(h),h=E(S)},C=function(m){if(f.value===X){g("resize",m);var y=e.autoSize||e.autosize;y&&T()}};fe(e.autosize===void 0,"Input.TextArea","autosize is deprecated, please use autoSize instead.");var I=function(){var m=e.prefixCls,y=e.autoSize,R=e.autosize,k=e.disabled,D=re(e,["prefixCls","onPressEnter","autoSize","autosize","defaultValue","allowClear","type","lazy","maxlength"]),G=ie(m,t.class,V({},"".concat(m,"-disabled"),k)),P=z(z(z({},t.style),u.value),f.value===Q?{overflowX:"hidden",overflowY:"hidden"}:null),j=z(z(z({},D),t),{style:P,class:G});return j.autofocus||delete j.autofocus,M(me,{onResize:C,disabled:!(y||R)},{default:function(){return[ge(M("textarea",N(N({},j),{},{ref:l}),null),[[pe]])]}})};te(function(){return e.value},function(){Z(function(){S()})}),ne(function(){Z(function(){S()})});var _=le();return c({resizeTextarea:S,textArea:l,instance:_}),function(){return I()}}}),Ie=Ee;function ue(d,e){return Y(d||"").slice(0,e).join("")}function ee(d,e,i,t){var g=i;return d?g=ue(i,t):Y(e||"").length<i.length&&Y(i||"").length>t&&(g=e),g}var Pe=ae({name:"ATextarea",inheritAttrs:!1,props:oe(),setup:function(e,i){var t=i.attrs,g=i.expose,c=i.emit,h=ye(),v=A(e.value===void 0?e.defaultValue:e.value),l=A(),u=A(""),f=he("input",e),s=f.prefixCls,S=f.size,T=f.direction,C=W(function(){return e.showCount===""||e.showCount||!1}),I=W(function(){return Number(e.maxlength)>0}),_=A(!1),w=A(),m=A(0),y=function(a){_.value=!0,w.value=u.value,m.value=a.currentTarget.selectionStart,c("compositionstart",a)},R=function(a){var n;_.value=!1;var r=a.currentTarget.value;if(I.value){var x=m.value>=e.maxlength+1||m.value===((n=w.value)===null||n===void 0?void 0:n.length);r=ee(x,w.value,r,e.maxlength)}r!==u.value&&(P(r),K(a.currentTarget,a,U,r)),c("compositionend",a)},k=le();te(function(){return e.value},function(){var o;"value"in k.vnode.props,v.value=(o=e.value)!==null&&o!==void 0?o:""});var D=function(a){var n;ze((n=l.value)===null||n===void 0?void 0:n.textArea,a)},G=function(){var a,n;(n=(a=l.value)===null||a===void 0?void 0:a.textArea)===null||n===void 0||n.blur()},P=function(a,n){v.value!==a&&(e.value===void 0?v.value=a:Z(function(){var r,x,p;l.value.textArea.value!==u.value&&((p=(r=l.value)===null||r===void 0?void 0:(x=r.instance).update)===null||p===void 0||p.call(x))}),Z(function(){n&&n()}))},j=function(a){a.keyCode===13&&c("pressEnter",a),c("keydown",a)},$=function(a){var n=e.onBlur;n==null||n(a),h.onFieldBlur()},U=function(a){c("update:value",a.target.value),c("change",a),c("input",a),h.onFieldChange()},se=function(a){K(l.value.textArea,a,U),P("",function(){D()})},q=function(a){var n=a.target.composing,r=a.target.value;if(_.value=!!(a.isComposing||n),!(_.value&&e.lazy||v.value===r)){if(I.value){var x=a.target,p=x.selectionStart>=e.maxlength+1||x.selectionStart===r.length||!x.selectionStart;r=ee(p,u.value,r,e.maxlength)}K(a.currentTarget,a,U,r),P(r)}},ve=function(){var a,n,r,x=t.style,p=t.class,H=e.bordered,B=H===void 0?!0:H,F=z(z(z({},re(e,["allowClear"])),t),{style:C.value?{}:x,class:(a={},V(a,"".concat(s.value,"-borderless"),!B),V(a,"".concat(p),p&&!C.value),V(a,"".concat(s.value,"-sm"),S.value==="small"),V(a,"".concat(s.value,"-lg"),S.value==="large"),a),showCount:null,prefixCls:s.value,onInput:q,onChange:q,onBlur:$,onKeydown:j,onCompositionstart:y,onCompositionend:R});return!((n=e.valueModifiers)===null||n===void 0)&&n.lazy&&delete F.onInput,M(Ie,N(N({},F),{},{id:(r=F.id)!==null&&r!==void 0?r:h.id.value,ref:l,maxlength:e.maxlength}),null)};return ne(function(){}),g({focus:D,blur:G,resizableTextArea:l}),xe(function(){var o=Se(v.value);!_.value&&I.value&&(e.value===null||e.value===void 0)&&(o=ue(o,e.maxlength)),u.value=o}),function(){var o=e.maxlength,a=e.bordered,n=a===void 0?!0:a,r=e.hidden,x=t.style,p=t.class,H=z(z(z({},e),t),{prefixCls:s.value,inputType:"text",handleReset:se,direction:T.value,bordered:n,style:C.value?void 0:x}),B=M(be,N(N({},H),{},{value:u.value}),{element:ve});if(C.value){var F=Y(u.value).length,O="";J(C.value)==="object"?O=C.value.formatter({count:F,maxlength:o}):O="".concat(F).concat(I.value?" / ".concat(o):""),B=M("div",{hidden:r,class:ie("".concat(s.value,"-textarea"),V({},"".concat(s.value,"-textarea-rtl"),T.value==="rtl"),"".concat(s.value,"-textarea-show-count"),p),style:x,"data-count":J(O)!=="object"?O:void 0},[B])}return B}}});export{Pe as T};
