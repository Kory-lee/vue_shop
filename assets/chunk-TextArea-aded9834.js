import{a as te,p as y,R as de,bS as E,bP as ce,w as ae,s as Z,q as ne,y as re,e as ie,f as F,_ as A,c as M,ab as fe,x as P,c0 as ge,bo as le,u as me,b as Q,aD as he,O as Y,bQ as J}from"./entry-index-200dc0c4.js";import{t as oe,C as xe,a as be,r as K,f as ze}from"./chunk-index-87ccb20e.js";import{a as Se}from"./chunk-antInputDirective-fe4d28a4.js";import{u as pe}from"./chunk-FormItemContext-67cbf678.js";var ye=`
 min-height:0 !important;
 max-height:none !important;
 height:0 !important;
 visibility:hidden !important;
 overflow:hidden !important;
 position:absolute !important;
 z-index:-1000 !important;
 top:0 !important;
 right:0 !important
`,Ae=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],L={},b;function Ce(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=d.getAttribute("id")||d.getAttribute("data-reactid")||d.getAttribute("name");if(e&&L[i])return L[i];var a=window.getComputedStyle(d),g=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),c=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),h=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),v=Ae.map(function(u){return"".concat(u,":").concat(a.getPropertyValue(u))}).join(";"),l={sizingStyle:v,paddingSize:c,borderSize:h,boxSizing:g};return e&&i&&(L[i]=l),l}function we(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;b||(b=document.createElement("textarea"),b.setAttribute("tab-index","-1"),b.setAttribute("aria-hidden","true"),document.body.appendChild(b)),d.getAttribute("wrap")?b.setAttribute("wrap",d.getAttribute("wrap")):b.removeAttribute("wrap");var g=Ce(d,e),c=g.paddingSize,h=g.borderSize,v=g.boxSizing,l=g.sizingStyle;b.setAttribute("style","".concat(l,";").concat(ye)),b.value=d.value||d.placeholder||"";var u=Number.MIN_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,s=b.scrollHeight,z;if(v==="border-box"?s+=h:v==="content-box"&&(s-=c),i!==null||a!==null){b.value=" ";var T=b.scrollHeight-c;i!==null&&(u=T*i,v==="border-box"&&(u=u+c+h),s=Math.max(u,s)),a!==null&&(f=T*a,v==="border-box"&&(f=f+c+h),z=s>f?"":"hidden",s=Math.min(f,s))}return{height:"".concat(s,"px"),minHeight:"".concat(u,"px"),maxHeight:"".concat(f,"px"),overflowY:z,resize:"none"}}var X=0,W=1,Te=2,_e=te({name:"ResizableTextArea",inheritAttrs:!1,props:oe(),setup:function(e,i){var a=i.attrs,g=i.emit,c=i.expose,h,v,l=y(),u=y({}),f=y(X);de(function(){E.cancel(h),E.cancel(v)});var s=function(){try{if(document.activeElement===l.value){var m=l.value.selectionStart,p=l.value.selectionEnd;l.value.setSelectionRange(m,p)}}catch(R){}},z=function(){var m=e.autoSize||e.autosize;if(!(!m||!l.value)){var p=m.minRows,R=m.maxRows;u.value=we(l.value,!1,p,R),f.value=W,E.cancel(v),v=E(function(){f.value=Te,v=E(function(){f.value=X,s()})})}},T=function(){E.cancel(h),h=E(z)},C=function(m){if(f.value===X){g("resize",m);var p=e.autoSize||e.autosize;p&&T()}};ce(e.autosize===void 0,"Input.TextArea","autosize is deprecated, please use autoSize instead.");var I=function(){var m=e.prefixCls,p=e.autoSize,R=e.autosize,k=e.disabled,B=re(e,["prefixCls","onPressEnter","autoSize","autosize","defaultValue","allowClear","type","lazy","maxlength","valueModifiers"]),G=ie(m,a.class,F({},"".concat(m,"-disabled"),k)),N=[a.style,u.value,f.value===W?{overflowX:"hidden",overflowY:"hidden"}:null],j=A(A(A({},B),a),{style:N,class:G});return j.autofocus||delete j.autofocus,M(ge,{onResize:C,disabled:!(p||R)},{default:function(){return[fe(M("textarea",P(P({},j),{},{ref:l}),null),[[Se]])]}})};ae(function(){return e.value},function(){Z(function(){z()})}),ne(function(){Z(function(){z()})});var _=le();return c({resizeTextarea:z,textArea:l,instance:_}),function(){return I()}}}),Ee=_e;function ue(d,e){return Y(d||"").slice(0,e).join("")}function ee(d,e,i,a){var g=i;return d?g=ue(i,a):Y(e||"").length<i.length&&Y(i||"").length>a&&(g=e),g}var Pe=te({name:"ATextarea",inheritAttrs:!1,props:oe(),setup:function(e,i){var a=i.attrs,g=i.expose,c=i.emit,h=pe(),v=y(e.value===void 0?e.defaultValue:e.value),l=y(),u=y(""),f=me("input",e),s=f.prefixCls,z=f.size,T=f.direction,C=Q(function(){return e.showCount===""||e.showCount||!1}),I=Q(function(){return Number(e.maxlength)>0}),_=y(!1),w=y(),m=y(0),p=function(t){_.value=!0,w.value=u.value,m.value=t.currentTarget.selectionStart,c("compositionstart",t)},R=function(t){var n;_.value=!1;var r=t.currentTarget.value;if(I.value){var x=m.value>=e.maxlength+1||m.value===((n=w.value)===null||n===void 0?void 0:n.length);r=ee(x,w.value,r,e.maxlength)}r!==u.value&&(N(r),K(t.currentTarget,t,U,r)),c("compositionend",t)},k=le();ae(function(){return e.value},function(){var o;"value"in k.vnode.props,v.value=(o=e.value)!==null&&o!==void 0?o:""});var B=function(t){var n;be((n=l.value)===null||n===void 0?void 0:n.textArea,t)},G=function(){var t,n;(n=(t=l.value)===null||t===void 0?void 0:t.textArea)===null||n===void 0||n.blur()},N=function(t,n){v.value!==t&&(e.value===void 0?v.value=t:Z(function(){var r,x,S;l.value.textArea.value!==u.value&&((S=(r=l.value)===null||r===void 0?void 0:(x=r.instance).update)===null||S===void 0||S.call(x))}),Z(function(){n&&n()}))},j=function(t){t.keyCode===13&&c("pressEnter",t),c("keydown",t)},$=function(t){var n=e.onBlur;n==null||n(t),h.onFieldBlur()},U=function(t){c("update:value",t.target.value),c("change",t),c("input",t),h.onFieldChange()},se=function(t){K(l.value.textArea,t,U),N("",function(){B()})},q=function(t){var n=t.target.composing,r=t.target.value;if(_.value=!!(t.isComposing||n),!(_.value&&e.lazy||v.value===r)){if(I.value){var x=t.target,S=x.selectionStart>=e.maxlength+1||x.selectionStart===r.length||!x.selectionStart;r=ee(S,u.value,r,e.maxlength)}K(t.currentTarget,t,U,r),N(r)}},ve=function(){var t,n,r,x=a.style,S=a.class,H=e.bordered,D=H===void 0?!0:H,V=A(A(A({},re(e,["allowClear"])),a),{style:C.value?{}:x,class:(t={},F(t,"".concat(s.value,"-borderless"),!D),F(t,"".concat(S),S&&!C.value),F(t,"".concat(s.value,"-sm"),z.value==="small"),F(t,"".concat(s.value,"-lg"),z.value==="large"),t),showCount:null,prefixCls:s.value,onInput:q,onChange:q,onBlur:$,onKeydown:j,onCompositionstart:p,onCompositionend:R});return!((n=e.valueModifiers)===null||n===void 0)&&n.lazy&&delete V.onInput,M(Ee,P(P({},V),{},{id:(r=V.id)!==null&&r!==void 0?r:h.id.value,ref:l,maxlength:e.maxlength}),null)};return ne(function(){}),g({focus:B,blur:G,resizableTextArea:l}),he(function(){var o=ze(v.value);!_.value&&I.value&&(e.value===null||e.value===void 0)&&(o=ue(o,e.maxlength)),u.value=o}),function(){var o=e.maxlength,t=e.bordered,n=t===void 0?!0:t,r=e.hidden,x=a.style,S=a.class,H=A(A(A({},e),a),{prefixCls:s.value,inputType:"text",handleReset:se,direction:T.value,bordered:n,style:C.value?void 0:x}),D=M(xe,P(P({},H),{},{value:u.value}),{element:ve});if(C.value){var V=Y(u.value).length,O="";J(C.value)==="object"?O=C.value.formatter({count:V,maxlength:o}):O="".concat(V).concat(I.value?" / ".concat(o):""),D=M("div",{hidden:r,class:ie("".concat(s.value,"-textarea"),F({},"".concat(s.value,"-textarea-rtl"),T.value==="rtl"),"".concat(s.value,"-textarea-show-count"),S),style:x,"data-count":J(O)!=="object"?O:void 0},[D])}return D}}});export{Pe as T};
